<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - Agenda</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #E91E63;
            --bg-body: #F3F4F6;
            --bg-card: #FFFFFF;
            --text-dark: #1F2937;
            --text-gray: #6B7280;
            --border: #E5E7EB;
            --radius: 12px;
            --shadow: 0 4px 15px rgba(0,0,0,0.05);

            --status-pending: #FEF3C7; --text-pending: #92400E;
            --status-confirmed: #DCFCE7; --text-confirmed: #166534;
            --status-blocked: #F3F4F6; --text-blocked: #4B5563;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg-body); color: var(--text-dark); display: flex; min-height: 100vh; overflow-x: hidden; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px; background: #fff; border-right: 1px solid var(--border);
            display: flex; flex-direction: column; padding: 25px;
            position: fixed; height: 100%; z-index: 1000;
            transition: transform 0.3s ease;
        }

        .brand-container {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;
        }

        .brand { font-size: 1.3rem; font-weight: 700; color: var(--primary); display: flex; align-items: center; gap: 10px; }

        .btn-close-sidebar {
            display: none; background: transparent; border: none; font-size: 1.2rem; cursor: pointer; color: var(--text-gray);
        }

        .nav-item {
            padding: 14px 15px; margin-bottom: 8px; border-radius: 10px;
            color: var(--text-gray); text-decoration: none; font-weight: 500;
            display: flex; align-items: center; gap: 12px; transition: 0.2s;
        }
        .nav-item:hover, .nav-item.active { background: #FCE4EC; color: var(--primary); }

        /* --- MAIN CONTENT --- */
        .main-content { margin-left: 260px; flex: 1; padding: 30px; width: 100%; }

        /* Mobile Header */
        .mobile-header {
            display: none; align-items: center; gap: 15px; margin-bottom: 20px;
        }
        .mobile-menu-btn {
            background: white; border: 1px solid var(--border); border-radius: 8px;
            width: 40px; height: 40px; font-size: 1.2rem; cursor: pointer; color: var(--text-dark);
            display: flex; align-items: center; justify-content: center;
        }

        /* Agenda Header */
        .agenda-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;
        }
        .page-title { font-size: 1.5rem; font-weight: 700; }

        .date-navigator {
            display: flex; align-items: center; gap: 15px; background: #fff; padding: 10px 20px;
            border-radius: var(--radius); border: 1px solid var(--border); box-shadow: var(--shadow);
        }
        .nav-arrow { cursor: pointer; color: var(--primary); font-weight: bold; font-size: 1.2rem; }

        /* Timeline Grid */
        .timeline { display: flex; flex-direction: column; gap: 15px; }
        .time-slot { display: flex; gap: 20px; min-height: 90px; }
        .time-label {
            width: 50px; font-weight: 600; color: var(--text-gray); font-size: 0.9rem;
            padding-top: 15px; text-align: right;
        }

        /* Cards */
        .slot-content { flex: 1; position: relative; }
        .appt-card {
            background: #fff; border-radius: var(--radius); padding: 18px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); cursor: pointer; transition: transform 0.2s;
        }
        .appt-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        .card-header { display: flex; justify-content: space-between; margin-bottom: 6px; align-items: center; }
        .client-name { font-weight: 600; font-size: 1rem; }
        .service-name { font-size: 0.9rem; color: var(--text-gray); }

        /* Status Styles */
        .status-tag { font-size: 0.75rem; padding: 4px 10px; border-radius: 20px; font-weight: 600; }
        .st-pending { background: var(--status-pending); color: var(--text-pending); border-left-color: #F59E0B; }
        .st-confirmed { background: var(--status-confirmed); color: var(--text-confirmed); border-left-color: #10B981; }
        .st-blocked { background: var(--status-blocked); color: var(--text-blocked); border-left-color: #9CA3AF; opacity: 0.9; }

        /* Modal Power-Up (FIXED UX) */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 2000;
        }
        .modal {
            background: #fff;
            width: 90%;
            max-width: 400px;
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease;
            position: relative; /* CORRE√á√ÉO IMPORTANTE: Mant√©m os filhos absolutos dentro do modal */
        }

        /* Bot√£o de Fechar fixado DENTRO do modal */
        .btn-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #F3F4F6; /* Fundo cinza para destaque */
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--text-dark);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        .btn-close:hover { background: #E5E7EB; }

        .modal-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px; margin-right: 30px; /* Espa√ßo pro bot√£o x */ }
        .modal-title { font-size: 1.2rem; font-weight: 700; margin: 0; }

        .badge-fault {
            background: #FEE2E2; color: #991B1B; padding: 2px 8px; border-radius: 6px;
            font-size: 0.75rem; font-weight: bold; display: flex; align-items: center; gap: 4px;
        }

        .service-detail { color: var(--text-gray); margin-bottom: 20px; font-size: 0.9rem; }

        .modal-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }

        .btn-action {
            width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;
        }
        .btn-confirm { background: var(--status-confirmed); color: var(--text-confirmed); grid-column: span 2; }
        .btn-noshow { background: #FFF7ED; color: #9A3412; border: 1px solid #FFEDD5; }
        .btn-cancel { background: #F3F4F6; color: #4B5563; }

        .danger-zone {
            margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border);
            text-align: center;
        }
        .btn-ban {
            background: transparent; color: #DC2626; border: none; font-size: 0.85rem;
            text-decoration: underline; cursor: pointer; font-weight: 500;
        }

        /* Overlay do Menu Mobile */
        .sidebar-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); z-index: 900;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* MOBILE RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); width: 280px; }
            .sidebar.active { transform: translateX(0); }
            .sidebar-overlay.active { display: block; }
            .btn-close-sidebar { display: block; }

            .main-content { margin-left: 0; padding: 20px; }
            .mobile-header { display: flex; }

            .agenda-header { flex-direction: column; align-items: flex-start; gap: 15px; }
            .date-navigator { width: 100%; justify-content: space-between; }
        }
    </style>
</head>
<body>

<div class="sidebar-overlay" onclick="toggleSidebar()"></div>

<nav class="sidebar">
    <div class="brand-container">
        <div class="brand">‚ú® Studio Admin</div>
        <button class="btn-close-sidebar" onclick="toggleSidebar()">‚úï</button>
    </div>

    <a href="#" class="nav-item active">üìÖ Agenda</a>
    <a href="admin-services.html" class="nav-item">üíÖ Servi√ßos</a>
    <a href="admin-clients.html" class="nav-item">üë• Clientes</a>
    <a href="admin-settings.html" class="nav-item">‚öôÔ∏è Configura√ß√µes</a>
</nav>

<main class="main-content">

    <div class="mobile-header">
        <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
        <span class="brand" style="font-size: 1.1rem;">Studio Admin</span>
    </div>

    <div class="agenda-header">
        <h2 class="page-title">Agenda Di√°ria</h2>
        <div class="date-navigator">
            <span class="nav-arrow">‚ùÆ</span>
            <span style="font-weight:600">Hoje, 11 Dez</span>
            <span class="nav-arrow">‚ùØ</span>
        </div>
    </div>

    <div class="timeline">
        <div class="time-slot">
            <div class="time-label">09:00</div>
            <div class="slot-content">
                <div class="appt-card st-confirmed" onclick="openModal('Maria Silva', 'Blindagem', 0)">
                    <div class="card-header">
                        <span class="client-name">Maria Silva</span>
                        <span class="status-tag st-confirmed">Confirmado</span>
                    </div>
                    <div class="service-name">Blindagem de Diamante (90m)</div>
                </div>
            </div>
        </div>

        <div class="time-slot">
            <div class="time-label">10:30</div>
            <div class="slot-content" style="border-top: 2px dashed #E5E7EB; margin-top: 20px;"></div>
        </div>

        <div class="time-slot">
            <div class="time-label">15:00</div>
            <div class="slot-content">
                <div class="appt-card st-pending" onclick="openModal('Joana Dark', 'P√© e M√£o', 3)">
                    <div class="card-header">
                        <span class="client-name">Joana Dark <span style="font-size:0.7rem; color:red">‚ö†</span></span>
                        <span class="status-tag st-pending">Pendente</span>
                    </div>
                    <div class="service-name">P√© e M√£o Simples (60m)</div>
                </div>
            </div>
        </div>
    </div>
</main>

<div id="detailsModal" class="modal-overlay">
    <div class="modal">
        <button class="btn-close" onclick="closeModal()">‚úï</button>

        <div class="modal-header">
            <div>
                <h3 id="modalClient" class="modal-title">Nome do Cliente</h3>
                <p id="modalService" class="service-detail">Servi√ßo</p>
            </div>
            <div id="faultBadge" class="badge-fault" style="display:none;">
                ‚ö† <span id="faultCount">0</span> Faltas
            </div>
        </div>

        <div class="modal-actions">
            <button class="btn-action btn-confirm">‚úÖ Confirmar</button>
            <button class="btn-action btn-noshow" onclick="alert('Falta registrada! Cliente penalizado.')">üëé Faltou</button>
            <button class="btn-action btn-cancel">‚ùå Cancelar</button>
        </div>

        <div class="danger-zone">
            <button class="btn-ban" onclick="confirm('Tem certeza que deseja BANIR este cliente? Ele n√£o poder√° mais agendar.')">üö´ Banir Cliente Permanentemente</button>
        </div>
    </div>
</div>

<script>
    function toggleSidebar() {
        document.querySelector('.sidebar').classList.toggle('active');
        document.querySelector('.sidebar-overlay').classList.toggle('active');
    }

    function openModal(client, service, faults) {
        document.getElementById('modalClient').innerText = client;
        document.getElementById('modalService').innerText = service;

        // L√≥gica do Badge de Faltas
        const badge = document.getElementById('faultBadge');
        const count = document.getElementById('faultCount');

        if (faults > 0) {
            badge.style.display = 'flex';
            count.innerText = faults;
            if(faults >= 3) {
                badge.style.backgroundColor = '#991B1B';
                badge.style.color = 'white';
            } else {
                badge.style.backgroundColor = '#FEE2E2';
                badge.style.color = '#991B1B';
            }
        } else {
            badge.style.display = 'none';
        }

        document.getElementById('detailsModal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('detailsModal').style.display = 'none';
    }
</script>
</body>
</html>